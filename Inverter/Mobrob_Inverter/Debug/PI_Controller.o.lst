   1              	 .syntax unified
   2              	 .cpu cortex-m4
   3              	 .eabi_attribute 27,3
   4              	 .fpu fpv4-sp-d16
   5              	 .eabi_attribute 20,1
   6              	 .eabi_attribute 21,1
   7              	 .eabi_attribute 23,3
   8              	 .eabi_attribute 24,1
   9              	 .eabi_attribute 25,1
  10              	 .eabi_attribute 26,1
  11              	 .eabi_attribute 30,6
  12              	 .eabi_attribute 34,1
  13              	 .eabi_attribute 18,4
  14              	 .thumb
  15              	 .file "PI_Controller.c"
  16              	 .text
  17              	.Ltext0:
  18              	 .cfi_sections .debug_frame
  19              	 .global Iq_param
  20              	 .section .data.Iq_param,"aw",%progbits
  21              	 .align 2
  24              	Iq_param:
  25 0000 295C8F3E 	 .word 1049582633
  26 0004 00006843 	 .word 1130889216
  27 0008 0000C842 	 .word 1120403456
  28 000c 0000C8C2 	 .word -1027080192
  29 0010 00000000 	 .word 0
  30 0014 00000000 	 .word 0
  31 0018 00000000 	 .word 0
  32 001c 00000000 	 .space 4
  33              	 .global Id_param
  34              	 .section .data.Id_param,"aw",%progbits
  35              	 .align 2
  38              	Id_param:
  39 0000 295C8F3E 	 .word 1049582633
  40 0004 00006843 	 .word 1130889216
  41 0008 0000C842 	 .word 1120403456
  42 000c 0000C8C2 	 .word -1027080192
  43 0010 00000000 	 .word 0
  44 0014 00000000 	 .word 0
  45 0018 00000000 	 .word 0
  46 001c 00000000 	 .space 4
  47              	 .global omega_param
  48              	 .section .data.omega_param,"aw",%progbits
  49              	 .align 2
  52              	omega_param:
  53 0000 CDCC4C3E 	 .word 1045220557
  54 0004 0AD7A33D 	 .word 1034147594
  55 0008 00000040 	 .word 1073741824
  56 000c 000000C0 	 .word -1073741824
  57 0010 00000000 	 .word 0
  58 0014 00000000 	 .word 0
  59 0018 00000000 	 .word 0
  60 001c 00000000 	 .space 4
  61              	 .section .text.omega_param_selctor,"ax",%progbits
  62              	 .align 2
  63              	 .global omega_param_selctor
  64              	 .thumb
  65              	 .thumb_func
  67              	omega_param_selctor:
  68              	.LFB0:
  69              	 .file 1 "../PI_Controller.c"
   1:../PI_Controller.c **** /*
   2:../PI_Controller.c ****  * PI_Controller.c
   3:../PI_Controller.c ****  *
   4:../PI_Controller.c ****  *  Created on: 30 Jun 2022
   5:../PI_Controller.c ****  *      Author: lukas
   6:../PI_Controller.c ****  */
   7:../PI_Controller.c **** #include "PI_Controller.h"
   8:../PI_Controller.c **** 
   9:../PI_Controller.c **** //#########################
  10:../PI_Controller.c **** //###### 	SET		#######
  11:../PI_Controller.c **** //#########################
  12:../PI_Controller.c **** 
  13:../PI_Controller.c **** 
  14:../PI_Controller.c **** //Vuales 14/04 with maurzio
  15:../PI_Controller.c **** //PID_param omega_param = {.P = 0.004, .I = 0.004, .D = 0.0, .MaxLimit =  1, .MinLimit = -1, .Outpu
  16:../PI_Controller.c **** //PID_param Iq_param = {.P = 0.05, .I = 25.0, .D = 0.0, .MaxLimit =  100, .MinLimit = -100, .Output
  17:../PI_Controller.c **** //PID_param Id_param = {.P = 0.05, .I = 25.0, .D = 0.0, .MaxLimit =  100, .MinLimit = -100, .Output
  18:../PI_Controller.c **** 
  19:../PI_Controller.c **** 
  20:../PI_Controller.c **** // crretn best on motor 10 iq 50Hz wbw
  21:../PI_Controller.c **** PI_param Iq_param = {.P = 0.28, .I = 232.0, .MaxLimit =  100, .MinLimit = -100, .Output = 0.0, .Dev
  22:../PI_Controller.c **** PI_param Id_param = {.P = 0.28, .I = 232.0, .MaxLimit =  100, .MinLimit = -100, .Output = 0.0, .Dev
  23:../PI_Controller.c **** 
  24:../PI_Controller.c **** // max ested iq 100Hz wbw
  25:../PI_Controller.c **** //PID_param Iq_param = {.P = 0.56, .I = 465.0, .D = 0.0, .MaxLimit =  100, .MinLimit = -100, .Outpu
  26:../PI_Controller.c **** //PID_param Id_param = {.P = 0.56, .I = 465.0, .D = 0.0, .MaxLimit =  100, .MinLimit = -100, .Outpu
  27:../PI_Controller.c **** 
  28:../PI_Controller.c **** 
  29:../PI_Controller.c **** PI_param omega_param = {.P = 0.2, .I = 0.08, .MaxLimit =  2, .MinLimit = -2, .Output = 0.0, .Deviat
  30:../PI_Controller.c **** void omega_param_selctor(uint8_t Motor_num){
  70              	 .loc 1 30 0
  71              	 .cfi_startproc
  72              	 
  73              	 
  74              	 
  75 0000 80B4     	 push {r7}
  76              	.LCFI0:
  77              	 .cfi_def_cfa_offset 4
  78              	 .cfi_offset 7,-4
  79 0002 83B0     	 sub sp,sp,#12
  80              	.LCFI1:
  81              	 .cfi_def_cfa_offset 16
  82 0004 00AF     	 add r7,sp,#0
  83              	.LCFI2:
  84              	 .cfi_def_cfa_register 7
  85 0006 0346     	 mov r3,r0
  86 0008 FB71     	 strb r3,[r7,#7]
  31:../PI_Controller.c **** 	 switch(Motor_num)
  87              	 .loc 1 31 0
  88 000a FB79     	 ldrb r3,[r7,#7]
  89 000c 062B     	 cmp r3,#6
  90 000e 02D0     	 beq .L3
  91 0010 0A2B     	 cmp r3,#10
  92 0012 07D0     	 beq .L4
  93 0014 0DE0     	 b .L1
  94              	.L3:
  32:../PI_Controller.c **** 	     {
  33:../PI_Controller.c **** 	         case 6: // M6 wbw 3Hz
  34:../PI_Controller.c **** 	        	  omega_param.P = 0.2859;
  95              	 .loc 1 34 0
  96 0016 094B     	 ldr r3,.L5
  97 0018 094A     	 ldr r2,.L5+4
  98 001a 1A60     	 str r2,[r3]
  35:../PI_Controller.c **** 	        	  omega_param.I = 0.1289;
  99              	 .loc 1 35 0
 100 001c 074B     	 ldr r3,.L5
 101 001e 094A     	 ldr r2,.L5+8
 102 0020 5A60     	 str r2,[r3,#4]
  36:../PI_Controller.c **** 	        	break;
 103              	 .loc 1 36 0
 104 0022 06E0     	 b .L1
 105              	.L4:
  37:../PI_Controller.c **** 	         case 10: //M10 3Hz wbw
  38:../PI_Controller.c **** 	        	 omega_param.P = 0.3949;
 106              	 .loc 1 38 0
 107 0024 054B     	 ldr r3,.L5
 108 0026 084A     	 ldr r2,.L5+12
 109 0028 1A60     	 str r2,[r3]
  39:../PI_Controller.c **** 	        	 omega_param.I = 0.1619;
 110              	 .loc 1 39 0
 111 002a 044B     	 ldr r3,.L5
 112 002c 074A     	 ldr r2,.L5+16
 113 002e 5A60     	 str r2,[r3,#4]
  40:../PI_Controller.c **** 	        	 //PI_param omega_param = {.P = 0.3949, .I = 0.1619, .MaxLimit =  2, .MinLimit = -2, .Out
  41:../PI_Controller.c **** 	        	 break;
 114              	 .loc 1 41 0
 115 0030 00BF     	 nop
 116              	.L1:
  42:../PI_Controller.c **** 	    }
  43:../PI_Controller.c **** }
 117              	 .loc 1 43 0
 118 0032 0C37     	 adds r7,r7,#12
 119              	.LCFI3:
 120              	 .cfi_def_cfa_offset 4
 121 0034 BD46     	 mov sp,r7
 122              	.LCFI4:
 123              	 .cfi_def_cfa_register 13
 124              	 
 125 0036 5DF8047B 	 ldr r7,[sp],#4
 126              	.LCFI5:
 127              	 .cfi_restore 7
 128              	 .cfi_def_cfa_offset 0
 129 003a 7047     	 bx lr
 130              	.L6:
 131              	 .align 2
 132              	.L5:
 133 003c 00000000 	 .word omega_param
 134 0040 7C61923E 	 .word 1049780604
 135 0044 5DFE033E 	 .word 1040449117
 136 0048 5530CA3E 	 .word 1053438037
 137 004c 1DC9253E 	 .word 1042663709
 138              	 .cfi_endproc
 139              	.LFE0:
 141              	 .global __aeabi_f2d
 142              	 .global __aeabi_dmul
 143              	 .global __aeabi_dadd
 144              	 .global __aeabi_d2f
 145              	 .section .text.PI_Controller,"ax",%progbits
 146              	 .align 2
 147              	 .global PI_Controller
 148              	 .thumb
 149              	 .thumb_func
 151              	PI_Controller:
 152              	.LFB1:
  44:../PI_Controller.c **** 
  45:../PI_Controller.c **** #define T_CYC 0.0002 // = 1.0 /5000.0 Hz; //Tcyc sample correspond to control update rate to PI con
  46:../PI_Controller.c **** 
  47:../PI_Controller.c **** // PID Controller
  48:../PI_Controller.c **** float PI_Controller(float SetPoint,float ActValue,PI_param *param){
 153              	 .loc 1 48 0
 154              	 .cfi_startproc
 155              	 
 156              	 
 157 0000 2DE9B043 	 push {r4,r5,r7,r8,r9,lr}
 158              	.LCFI6:
 159              	 .cfi_def_cfa_offset 24
 160              	 .cfi_offset 4,-24
 161              	 .cfi_offset 5,-20
 162              	 .cfi_offset 7,-16
 163              	 .cfi_offset 8,-12
 164              	 .cfi_offset 9,-8
 165              	 .cfi_offset 14,-4
 166 0004 88B0     	 sub sp,sp,#32
 167              	.LCFI7:
 168              	 .cfi_def_cfa_offset 56
 169 0006 00AF     	 add r7,sp,#0
 170              	.LCFI8:
 171              	 .cfi_def_cfa_register 7
 172 0008 F860     	 str r0,[r7,#12]
 173 000a B960     	 str r1,[r7,#8]
 174 000c 7A60     	 str r2,[r7,#4]
  49:../PI_Controller.c **** 
  50:../PI_Controller.c **** 	float Deviation = SetPoint - ActValue;
 175              	 .loc 1 50 0
 176 000e 97ED037A 	 flds s14,[r7,#12]
 177 0012 D7ED027A 	 flds s15,[r7,#8]
 178 0016 77EE677A 	 fsubs s15,s14,s15
 179 001a C7ED067A 	 fsts s15,[r7,#24]
  51:../PI_Controller.c **** 	float temp1, temp2;
  52:../PI_Controller.c **** 
  53:../PI_Controller.c **** 	 temp1 = param->P*Deviation;
 180              	 .loc 1 53 0
 181 001e 7B68     	 ldr r3,[r7,#4]
 182 0020 93ED007A 	 flds s14,[r3]
 183 0024 D7ED067A 	 flds s15,[r7,#24]
 184 0028 67EE277A 	 fmuls s15,s14,s15
 185 002c C7ED057A 	 fsts s15,[r7,#20]
  54:../PI_Controller.c **** 	 temp2 = temp1 + param->I * T_CYC * Deviation + param->Output_z;
 186              	 .loc 1 54 0
 187 0030 7869     	 ldr r0,[r7,#20]
 188 0032 FFF7FEFF 	 bl __aeabi_f2d
 189 0036 0446     	 mov r4,r0
 190 0038 0D46     	 mov r5,r1
 191 003a 7B68     	 ldr r3,[r7,#4]
 192 003c 5B68     	 ldr r3,[r3,#4]
 193 003e 1846     	 mov r0,r3
 194 0040 FFF7FEFF 	 bl __aeabi_f2d
 195 0044 0246     	 mov r2,r0
 196 0046 0B46     	 mov r3,r1
 197 0048 1046     	 mov r0,r2
 198 004a 1946     	 mov r1,r3
 199 004c 2EA3     	 adr r3,.L16
 200 004e D3E90023 	 ldrd r2,[r3]
 201 0052 FFF7FEFF 	 bl __aeabi_dmul
 202 0056 0246     	 mov r2,r0
 203 0058 0B46     	 mov r3,r1
 204 005a 9046     	 mov r8,r2
 205 005c 9946     	 mov r9,r3
 206 005e B869     	 ldr r0,[r7,#24]
 207 0060 FFF7FEFF 	 bl __aeabi_f2d
 208 0064 0246     	 mov r2,r0
 209 0066 0B46     	 mov r3,r1
 210 0068 4046     	 mov r0,r8
 211 006a 4946     	 mov r1,r9
 212 006c FFF7FEFF 	 bl __aeabi_dmul
 213 0070 0246     	 mov r2,r0
 214 0072 0B46     	 mov r3,r1
 215 0074 2046     	 mov r0,r4
 216 0076 2946     	 mov r1,r5
 217 0078 FFF7FEFF 	 bl __aeabi_dadd
 218 007c 0246     	 mov r2,r0
 219 007e 0B46     	 mov r3,r1
 220 0080 1446     	 mov r4,r2
 221 0082 1D46     	 mov r5,r3
 222 0084 7B68     	 ldr r3,[r7,#4]
 223 0086 DB69     	 ldr r3,[r3,#28]
 224 0088 1846     	 mov r0,r3
 225 008a FFF7FEFF 	 bl __aeabi_f2d
 226 008e 0246     	 mov r2,r0
 227 0090 0B46     	 mov r3,r1
 228 0092 2046     	 mov r0,r4
 229 0094 2946     	 mov r1,r5
 230 0096 FFF7FEFF 	 bl __aeabi_dadd
 231 009a 0246     	 mov r2,r0
 232 009c 0B46     	 mov r3,r1
 233 009e 1046     	 mov r0,r2
 234 00a0 1946     	 mov r1,r3
 235 00a2 FFF7FEFF 	 bl __aeabi_d2f
 236 00a6 0346     	 mov r3,r0
 237 00a8 FB61     	 str r3,[r7,#28]
  55:../PI_Controller.c **** 
  56:../PI_Controller.c **** 	 if (temp2 >= param->MaxLimit){
 238              	 .loc 1 56 0
 239 00aa 7B68     	 ldr r3,[r7,#4]
 240 00ac 93ED027A 	 flds s14,[r3,#8]
 241 00b0 D7ED077A 	 flds s15,[r7,#28]
 242 00b4 B4EEE77A 	 fcmpes s14,s15
 243 00b8 F1EE10FA 	 fmstat
 244 00bc 03D8     	 bhi .L15
  57:../PI_Controller.c **** 		 temp2 = param->MaxLimit;
 245              	 .loc 1 57 0
 246 00be 7B68     	 ldr r3,[r7,#4]
 247 00c0 9B68     	 ldr r3,[r3,#8]
 248 00c2 FB61     	 str r3,[r7,#28]
 249 00c4 0CE0     	 b .L10
 250              	.L15:
  58:../PI_Controller.c **** 	 }
  59:../PI_Controller.c **** 	 else if (temp2 < param->MinLimit){
 251              	 .loc 1 59 0
 252 00c6 7B68     	 ldr r3,[r7,#4]
 253 00c8 93ED037A 	 flds s14,[r3,#12]
 254 00cc D7ED077A 	 flds s15,[r7,#28]
 255 00d0 B4EEE77A 	 fcmpes s14,s15
 256 00d4 F1EE10FA 	 fmstat
 257 00d8 02DD     	 ble .L10
  60:../PI_Controller.c **** 		 temp2 = param->MinLimit;
 258              	 .loc 1 60 0
 259 00da 7B68     	 ldr r3,[r7,#4]
 260 00dc DB68     	 ldr r3,[r3,#12]
 261 00de FB61     	 str r3,[r7,#28]
 262              	.L10:
  61:../PI_Controller.c **** 	 }
  62:../PI_Controller.c **** 
  63:../PI_Controller.c **** 	 param->Output_z = temp2 - temp1;
 263              	 .loc 1 63 0
 264 00e0 97ED077A 	 flds s14,[r7,#28]
 265 00e4 D7ED057A 	 flds s15,[r7,#20]
 266 00e8 77EE677A 	 fsubs s15,s14,s15
 267 00ec 7B68     	 ldr r3,[r7,#4]
 268 00ee C3ED077A 	 fsts s15,[r3,#28]
  64:../PI_Controller.c **** 
  65:../PI_Controller.c **** 	 param->Output = temp2;
 269              	 .loc 1 65 0
 270 00f2 7B68     	 ldr r3,[r7,#4]
 271 00f4 FA69     	 ldr r2,[r7,#28]
 272 00f6 1A61     	 str r2,[r3,#16]
  66:../PI_Controller.c **** 
  67:../PI_Controller.c **** 	return param->Output;
 273              	 .loc 1 67 0
 274 00f8 7B68     	 ldr r3,[r7,#4]
 275 00fa 1B69     	 ldr r3,[r3,#16]
  68:../PI_Controller.c **** 
  69:../PI_Controller.c **** }
 276              	 .loc 1 69 0
 277 00fc 1846     	 mov r0,r3
 278 00fe 2037     	 adds r7,r7,#32
 279              	.LCFI9:
 280              	 .cfi_def_cfa_offset 24
 281 0100 BD46     	 mov sp,r7
 282              	.LCFI10:
 283              	 .cfi_def_cfa_register 13
 284              	 
 285 0102 BDE8B083 	 pop {r4,r5,r7,r8,r9,pc}
 286              	.L17:
 287 0106 00BF     	 .align 3
 288              	.L16:
 289 0108 2D431CEB 	 .word -350469331
 290 010c E2362A3F 	 .word 1059731170
 291              	 .cfi_endproc
 292              	.LFE1:
 294              	 .text
 295              	.Letext0:
 296              	 .file 2 "c:\\dave\\dave-ide-4.4.2-64bit\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\machine\\_default_types.h"
 297              	 .file 3 "c:\\dave\\dave-ide-4.4.2-64bit\\dave-ide-4.4.2-64bit\\eclipse\\arm-gcc-49\\arm-none-eabi\\include\\stdint.h"
 298              	 .file 4 "../PI_Controller.h"
DEFINED SYMBOLS
                            *ABS*:00000000 PI_Controller.c
    {standard input}:24     .data.Iq_param:00000000 Iq_param
    {standard input}:21     .data.Iq_param:00000000 $d
    {standard input}:38     .data.Id_param:00000000 Id_param
    {standard input}:35     .data.Id_param:00000000 $d
    {standard input}:52     .data.omega_param:00000000 omega_param
    {standard input}:49     .data.omega_param:00000000 $d
    {standard input}:62     .text.omega_param_selctor:00000000 $t
    {standard input}:67     .text.omega_param_selctor:00000000 omega_param_selctor
    {standard input}:133    .text.omega_param_selctor:0000003c $d
    {standard input}:146    .text.PI_Controller:00000000 $t
    {standard input}:151    .text.PI_Controller:00000000 PI_Controller
    {standard input}:289    .text.PI_Controller:00000108 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
__aeabi_f2d
__aeabi_dmul
__aeabi_dadd
__aeabi_d2f
